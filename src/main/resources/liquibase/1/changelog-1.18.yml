databaseChangeLog:
  - changeSet:
      id: update-watch-history-to-final-v2
      author: Aslanli
      changes:
        # 1. Yeni sütunların əlavə edilməsi
        - addColumn:
            tableName: watch_history
            columns:
              - column:
                  name: watched_seconds
                  type: BIGINT
                  defaultValueNumeric: 0
              - column:
                  name: is_completed
                  type: BOOLEAN
                  defaultValueBoolean: false
              - column:
                  name: progress_percentage
                  type: DECIMAL(5,2)
                  defaultValueNumeric: 0.00
              - column:
                  name: watch_count
                  type: INT
                  defaultValueNumeric: 1
              - column:
                  name: first_watched_at
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP

        # 2. Köhnə sütunların silinməsi (Ehtiyac qalmadıqda)
        - dropColumn:
            tableName: watch_history
            columnName: stopped_at
        - dropColumn:
            tableName: watch_history
            columnName: is_finished